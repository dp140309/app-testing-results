#### 20190521:patch测试

- patch描述：麦克风权限管理

  device-generic-common-modprobe-snd-dummy.patch

  framework-base-set-property-to-vir_audio.patch

  hardware-libaudio-Select-the-virtual-audio-device.patch

- 测试环境

  S1笔记本

  未打patch前的系统：201905200845-oto8-eng.img

- 测试结果

  |                              | 未打patch的系统                        | 打patch的系统      |
  | ---------------------------- | -------------------------------------- | ------------------ |
  | 录音机直接录音               | 测试通过，可以录音                     | 测试通过，可以录音 |
  | 录音机开启状态下关闭录音权限 | 录音机崩溃，再次启动依旧会申请录音权限 | 无法关闭录音权限   |
  | 录音机关闭状态下关闭录音权限 | 启动时依旧会申请录音权限               | 无法关闭录音权限   |
  | QQ直接录音                   | 测试通过，可以录音                     | 测试通过，可以录音 |
  | QQ开启状态下关闭录音权限     | QQ崩溃，无法启动                       | 无法关闭录音权限   |
  | QQ关闭状态下打开录音权限     | QQ崩溃，无法启动                       | 无法关闭录音权限   |
  | 录音权限：QQ开启，录音机关闭 | QQ测试通过，录音机重新申请录音权限     | 无法关闭录音权限   |
  | 录音权限：录音机开启，QQ关闭 | 录音机测试通过，QQ崩溃                 | 无法关闭录音权限   |


#### 20190523:patch测试

- patch描述：麦克风权限管理

  device-generic-common-modprobe-snd-dummy.patch

  framework-base-set-property-to-vir_audio.patch(**在20190521的基础上有修改**)

  hardware-libaudio-Select-the-virtual-audio-device.patch

- 测试环境

  S1笔记本

  未打patch前的系统：201905200845-oto8-eng.img

- 测试结果

  |                              | 未打patch的系统                        | 打patch的系统                                        |
  | ---------------------------- | -------------------------------------- | ---------------------------------------------------- |
  | 录音机直接录音               | 测试通过，可以录音                     | 测试通过，可以录音                                   |
  | 录音机开启状态下关闭录音权限 | 录音机崩溃，再次启动依旧会申请录音权限 | 测试通过，录音效果为无声状态                         |
  | 录音机关闭状态下关闭录音权限 | 启动时依旧会申请录音权限               | 测试通过，录音效果为无声状态                         |
  | QQ直接录音                   | 测试通过，可以录音                     | 测试通过，可以录音                                   |
  | QQ开启状态下关闭录音权限     | QQ崩溃，无法启动                       | 测试通过，QQ自动检测到录音效果为无声状态             |
  | QQ关闭状态下关闭录音权限     | QQ崩溃，无法启动                       | 测试通过，QQ自动检测到录音效果为无声状态             |
  | 微信直接录音                   | 测试通过，可以录音                     | 测试通过，可以录音                                   |
  | 关闭微信录音权限     | 微信崩溃                       | 测试通过，微信自动检测到录音效果为无声状态             |
  | 录音权限：QQ开启，录音机关闭 | QQ测试通过，录音机重新申请录音权限     | 测试通过，QQ正常录音，录音机录音效果为无声           |
  | 录音权限：录音机开启，QQ关闭 | 录音机测试通过，QQ崩溃                 | 测试通过，QQ自动检测到录音效果为无声，录音机正常录音 |

  

#### 20190524:patch测试

- patch描述：摄像头权限管理

  device-generic-common-modprobe-vivid.patch

  framework-base-set-property-to-vir_camera.patch
  packages-apps-PackageInstaller-determine-whether-the.patch
  hardware-libcamera-Switch-Virtual-Camera.patch
  frameworks-av-set-perpory-persist.camera.use_fake-ac.patch

- 测试环境

  S1笔记本

  未打patch前的系统：201905200845-oto8-eng.img + audio patch

- 测试结果  
由于微信相机仍存在问题，暂时不参与测试

  |                                  | 未打patch的系统        | 打patch的系统          |
  | -------------------------------- | ---------------------- | ---------------------- |
  | QuickPic直接拍照                 | 提示无法连接到相机     | 测试通过，可以拍照     |
  | QuickPic开启状态下关闭摄像头权限 | 无法使用               | 无法使用，提示没有权限 |
  | QuickPic关闭状态下关闭摄像头权限 | 无法使用               | 无法使用，提示没有权限 |
  | QQ、微博直接拍照                 | 提示分屏模式下无法使用 | 提示分屏模式下无法使用 |
  | QQ开启状态下关闭摄像头权限       | 无法使用               | ＱＱ崩溃，无法启动     |
  | QQ关闭状态下关闭摄像头权限       | 无法使用               | 无法使用               |
  | 摄像头权限：QQ开启，QuickPic关闭 | 无法使用               | QQ与相机都无法使用相机 |
  | 摄像头权限：QuickPic开启，QQ关闭 | 无法使用               | 相机可用，QQ崩溃       |

  
