# 云服务功能需求

## 基本功能

### 云服务应用
- 帐号绑定
- 帐号解除绑定
- 帐号注册
- 修改openthos服务器
- 生成本地账户信息告知seafile keeper，并监听返回
- 备份还原
   - 备份：备份用户选择的壁纸、无线网、开始菜单、应用数据到服务器的config目录
   - 还原：如果config目录已同步，将选择的还原项目应用的电脑上
   - 还原：如果config目录未同步，提示用户未完成下载
   - 还原：如果config目录下没有相关备份数据，提示用户

### 服务器
- 单用户默认容量配额10G
- 默认域名为https://cloud.openthos.com
- 其它域名为
   - http://dev.openthos.org
   - 图书馆http://166.111.120.235

### seafile keeper
- seafile keeper跟随系统开机启动，类似logd等守护进程
- seafile keeper在自身启动完后，启动seafile cli客户端daemon，并监测客户端运行状态信息如PID，若发现运行不正常重启之；
- seafile keeper可对seafile cli客户端进行相应的命令操作功能，如执行命令"seaf-cli status"；
- 首次登录时应用GUI层接收的用户账户信息，通过写到指定文件的方式，seafile keeper监听并读取该文件，以登录该账户；
- 获取客户端状态信息，如上传下载状态、传输速度、传输文件数、报错、容量信息等，把状态信息写到指定log文件，以对接应用GUI；
- Seafile默认备份documents和pictures目录

### 文件管理器
- 没有绑定帐号时提示绑定帐号
- 进入云服务后直接显示data目录，不显示其它目录
- 支持文件的查看、添加、修改、删除操作

### 通知中心
- 显示并更新上传下载进度、已同步等log信息

### 设置
- 提供跳转到云服务帐号相关内容界面的入口

### 首次配置
- 帐号注册
- 帐号绑定

### seafile网页端和客户端
- 用户不能修改config目录
- seafile网页里的共享功能默认不要创建 只有config+data
- 禁用所有共享

***

## 稳定性
### 上传下载
- 断网续传
- 出现异常后报告错误，并提供继续操作的处理
- 多个上传下载操作连续进行不冲突
- 手动解除绑定后，不再进行上传下载等操作，未完成传输的文件可以在下次绑定后继续同步
- 上传数据时，如果服务器端满容量，本地目录暂停同步，每次浏览相关目录都显示非干扰性的“容量超出云服务限制，文件同步已停止“信息。用户手动删除部分文件让总空间降下来再启动同步

### 已同步
- 在已绑定帐号且有网的情况下，保持和远程服务器的数据同步
- 出现网络中断等异常情况无法与服务器同步时，在通知中心显示提示信息

***

## 其它操作
- 云服务运行时只占用/data分区，/system分区启动后只读
- 允许不同设备同时登录
- live系统不启用云服务
